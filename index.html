<!DOCTYPE html>
<html lang="en" class="dark scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elias Kizito | T-Mobile Strategic Command Center</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --tmobile-magenta: #E20074;
            --crl-blue: #2563EB;
            --stock-green: #22c55e;
            --stock-red: #ef4444;
            --bg-dark: #0A0A0A;
            --bg-light: #F5F5F5;
            --card-dark: #141414;
            --card-light: #FFFFFF;
            --border-dark: #262626;
            --border-light: #E5E5E5;
            --text-primary-dark: #FAFAFA;
            --text-primary-light: #171717;
            --text-secondary-dark: #A3A3A3;
            --text-secondary-light: #737373;
        }
        html {
            --bg: var(--bg-dark);
            --card-bg: var(--card-dark);
            --border: var(--border-dark);
            --text-primary: var(--text-primary-dark);
            --text-secondary: var(--text-secondary-dark);
            scrollbar-color: var(--border-dark) var(--bg-dark);
        }
        html:not(.dark) {
            --bg: var(--bg-light);
            --card-bg: var(--card-light);
            --border: var(--border-light);
            --text-primary: var(--text-primary-light);
            --text-secondary: var(--text-secondary-light);
            scrollbar-color: var(--border-light) var(--bg-light);
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: var(--text-secondary); transition: background-color 0.3s ease, color 0.3s ease; }
        .t-magenta { color: var(--tmobile-magenta); }
        .t-magenta-bg { background-color: var(--tmobile-magenta); }
        .t-magenta-border { border-color: var(--tmobile-magenta); }
        .crl-blue { color: var(--crl-blue); }
        .crl-blue-bg { background-color: var(--crl-blue); }
        .crl-blue-border { border-color: var(--crl-blue); }
        .card { background-color: var(--card-bg); border-color: var(--border); transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease-out; }
        .text-primary { color: var(--text-primary); transition: color 0.3s ease; }
        .text-secondary { color: var(--text-secondary); transition: color 0.3s ease; }
        .border-color { border-color: var(--border); transition: border-color 0.3s ease; }
        .btn-secondary { background-color: var(--card-bg); border-color: var(--border); }
        .btn-secondary:hover { background-color: var(--border); }

        .fade-in-up {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s cubic-bezier(0.215, 0.610, 0.355, 1) 0.2s, transform 0.6s cubic-bezier(0.215, 0.610, 0.355, 1) 0.2s;
        }
        .fade-in-up.is-visible { opacity: 1; transform: translateY(0); }
        
        .modal { backdrop-filter: blur(8px); }
        .modal-content { transition: transform 0.3s cubic-bezier(0.215, 0.610, 0.355, 1), opacity 0.3s ease; }
        
        .accordion-content { overflow: hidden; transition: max-height 0.4s ease-in-out; }
        .accordion-trigger svg { transition: transform 0.3s ease; }
        [aria-expanded="true"] svg { transform: rotate(180deg); }

        .loader-container { z-index: 1000; transition: opacity 0.5s ease-out; }
        .loader-bar { transform-origin: left; }
        
        html.presenter-mode { scrollbar-width: none; }
        html.presenter-mode::-webkit-scrollbar { display: none; }
        .presenter-mode #sidebar-nav-container, .presenter-mode #header-container, .presenter-mode footer { display: none; }
        .presenter-mode main { padding: 0 !important; }
        .presenter-mode section {
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem;
            border-bottom: 1px solid var(--border);
        }
        .presenter-mode .section-header {
            justify-content: center;
            text-align: center;
            margin-left: auto;
            margin-right: auto;
        }
        .presenter-mode .section-content {
            text-align: center;
            margin-left: auto;
            margin-right: auto;
            max-width: 1024px;
        }
        .presenter-mode .accordion-item, .presenter-mode .accordion-trigger {
            text-align: left;
        }
        
        .cursor-gradient {
            background: radial-gradient(600px circle at var(--mouse-x) var(--mouse-y), rgba(226, 0, 116, 0.1), transparent 80%);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1000;
        }
    </style>
</head>
<body class="min-h-screen">

<!-- Gradient follows cursor -->
<div class="cursor-gradient"></div>

<!-- Initial loading indicator -->
<div id="loader" class="loader-container fixed inset-0 bg-[var(--bg)] flex flex-col items-center justify-center">
    <div class="w-64 text-center">
         <svg class="w-16 h-16 mx-auto t-magenta" viewBox="0 0 100 100" aria-hidden="true"><path fill="currentColor" d="M50 5c-24.81 0-45 20.19-45 45s20.19 45 45 45 45-20.19 45-45S74.81 5 50 5zm0 18.5c14.63 0 26.5 11.87 26.5 26.5S64.63 76.5 50 76.5 23.5 64.63 23.5 50 35.37 23.5 50 23.5zm0 5c-11.87 0-21.5 9.63-21.5 21.5S38.13 71.5 50 71.5 71.5 61.87 71.5 50 61.87 28.5 50 28.5z"></path></svg>
         <p class="mt-4 text-primary font-semibold">Initializing Strategic Blueprint...</p>
         <p class="text-sm text-secondary">Elias M. Kizito</p>
         <div class="w-full h-1 mt-4 bg-[var(--border)] rounded-full overflow-hidden">
             <div id="loader-bar" class="loader-bar h-1 t-magenta-bg" style="transform: scaleX(0);"></div>
         </div>
    </div>
</div>

<!-- Main application container -->
<div id="app-container" class="opacity-0 transition-opacity duration-500 flex">
    
    <!-- Sidebar Navigation -->
    <nav id="sidebar-nav-container" class="hidden lg:flex sticky top-0 h-screen w-80 border-r border-color p-6 flex-col">
        <div class="flex items-center gap-4">
            <img src="https://res.cloudinary.com/dtrnpryf8/image/upload/v1750329381/prof-pic-ellz_iqnmhu.jpg" alt="A profile photo of Elias Kizito" class="h-14 w-14 rounded-full border-2 border-[var(--tmobile-magenta)] object-cover">
            <div>
                <h1 class="font-bold text-lg text-primary">Elias M. Kizito</h1>
                <p class="text-xs text-secondary">Client Partner, Enterprise Sales</p>
            </div>
        </div>
        <ul id="sidebar-nav" class="mt-12 space-y-2"></ul>

        <div class="mt-auto pt-8">
             <p class="text-xs text-secondary font-semibold mb-2">CONTROLS</p>
             <button id="dark-toggle" class="w-full text-left flex items-center gap-3 p-2 rounded-md text-primary font-semibold transition-colors hover:bg-[var(--border)]">
                 <!-- Icons injected by JS -->
                 <span>Toggle Theme (D)</span>
             </button>
        </div>
    </nav>

    <div class="flex-1 min-w-0">
        <!-- Top Header Bar -->
        <header id="header-container" class="sticky top-0 z-40 bg-[var(--bg)]/80 backdrop-blur-sm border-b border-color">
             <div class="max-w-7xl mx-auto flex items-center justify-end p-2 gap-2">
                 <button id="presenter-toggle" title="Toggle Presenter Mode (P)" class="px-3 py-1.5 inline-flex items-center gap-2 rounded-md border border-color bg-card hover:bg-border transition-colors text-sm font-semibold text-primary">
                     <!-- Icons injected by JS -->
                 </button>
             </div>
        </header>

        <!-- Main Content Area -->
        <main id="main-content" class="p-4 md:p-8 lg:p-12">
            <!-- Sections injected by JS -->
        </main>

        <!-- Footer -->
        <footer class="text-center p-8 border-t border-color text-sm text-secondary">
            This Executive Briefing was prepared by Elias M. Kizito for the T-Mobile Enterprise Team.
        </footer>
    </div>
</div>

<!-- Presenter Mode Floating Controls -->
<div id="presenter-controls" class="fixed bottom-6 right-6 z-50 flex items-center gap-2 opacity-0 pointer-events-none transition-opacity">
    <button id="presenter-prev-btn" aria-label="Previous Slide" class="h-12 w-12 flex items-center justify-center rounded-full btn-secondary shadow-lg"><svg class="w-6 h-6 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="15 18 9 12 15 6"></polyline></svg></button>
    <button id="presenter-next-btn" aria-label="Next Slide" class="h-12 w-12 flex items-center justify-center rounded-full btn-secondary shadow-lg"><svg class="w-6 h-6 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="9 18 15 12 9 6"></polyline></svg></button>
</div>

<!-- Modal container -->
<div id="modal-container"></div>

<!-- Hidden SVG definitions for icons -->
<div id="svg-icon-defs" style="display: none;">
    <svg id="icon-BookOpen" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
    <svg id="icon-UserCheck" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><polyline points="16 11 18 13 22 9"/></svg>
    <svg id="icon-Timer" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><line x1="10" y1="2" x2="14" y2="2"></line><line x1="12" y1="14" x2="12" y2="18"></line><path d="M19 14a7 7 0 1 1-14 0"></path><path d="M12 2v2"></path><path d="M12 18v4"></path></svg>
    <svg id="icon-ListChecks" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="m3 17 2 2 4-4"/><path d="m3 7 2 2 4-4"/><path d="M13 6h8"/><path d="M13 12h8"/><path d="M13 18h8"/></svg>
    <svg id="icon-Target" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg>
    <svg id="icon-Users" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
    <svg id="icon-Search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
    <svg id="icon-Map" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
    <svg id="icon-Shield" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
    <svg id="icon-Globe2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><circle cx="12" cy="12" r="10"></circle><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20z"></path><path d="M2 12h20"></path></svg>
    <svg id="icon-Factory" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"></path><path d="M17 18h1"></path><path d="M12 18h1"></path><path d="M7 18h1"></path></svg>
    <svg id="icon-Network" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><rect x="2" y="2" width="20" height="20" rx="2"/><path d="M12 10v4"/><path d="M12 18v-2"/><path d="M12 8V6"/><path d="M7 15v-4"/><path d="M17 15v-4"/><path d="M7 18v-1"/><path d="M17 18v-1"/><path d="M7 8V6"/><path d="M17 8V6"/></svg>
    <svg id="icon-Cpu" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><path d="M15 2v2"/><path d="M15 20v2"/><path d="M9 2v2"/><path d="M9 20v2"/><path d="M2 9h2"/><path d="M2 15h2"/><path d="M20 9h2"/><path d="M20 15h2"/></svg>
    <svg id="icon-Lock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
    <svg id="icon-Sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
    <svg id="icon-Moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
    <svg id="icon-BarChart3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></svg>
    <svg id="icon-Close" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
    <svg id="icon-Rocket" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.3.05-3.12-.65-.82-2.17-1.43-3.12-1.88zM12 15.5V13a2 2 0 0 0-2-2H8.5a2 2 0 0 0-2 2v2.5a2 2 0 0 0 2 2H10a2 2 0 0 0 2-2zM12 2v4M12 12l8-8M16 4h4v4"/></svg>
    <svg id="icon-Play" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
    <svg id="icon-Pause" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
    <svg id="icon-Zap" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>
</div>


<script>
// SELF-CONTAINED SCRIPT FOR SINGLE-FILE DEPLOYMENT
document.addEventListener('DOMContentLoaded', () => {

// --- DATA MODEL (FULL DETAIL) ---
const STRATEGY_DATA = {
    title: "New England Command Center: A Strategic 90-Day Action Plan",
    subtitle: "Presented to: Alissa Gedman & Rich Hunter | Oct 3, 2025 | Presented by: Elias M. Kizito",
    sections: [
        { id: 'intro', navLabel: 'Introduction', icon: 'BookOpen', title: 'My Commitment: From Partner to Indispensable Asset' },
        { id: 'why-me', navLabel: 'Why Me?', icon: 'UserCheck', title: 'Why This Plan? Why Me?' },
        { id: 'methodology', navLabel: 'The 90-Day Plan', icon: 'Timer', title: 'The 30-60-90 Day Methodology' },
        { id: 'foundation-deep-dive', navLabel: 'Foundation Deep Dive', icon: 'Users', title: 'The Foundation (Days 1-30): A Deep Dive' },
        { id: 'bsx', navLabel: 'Boston Scientific', icon: null, title: 'Scenario 1: Boston Scientific' },
        { id: 'crl', navLabel: 'Charles River Labs', icon: null, title: 'Scenario 2: Charles River Labs' },
        { id: 'accelerator', navLabel: '60-Day Accelerator', icon: 'Rocket', title: 'The 60-Day Accelerator: From Plan to Pilot' },
        { id: 'impact', navLabel: '90-Day Impact', icon: 'BarChart3', title: 'The 90-Day Impact: From Pilot to Pipeline' },
        { id: 'summary', navLabel: 'Consolidated Plan', icon: 'ListChecks', title: 'Consolidated 90-Day Action Plan' },
        { id: 'momentum', navLabel: 'My Operating System', icon: 'Zap', title: 'How I Build & Sustain Momentum' },
        { id: 'conclusion', navLabel: 'Conclusion', icon: 'Target', title: 'Conclusion: The Partnership Ahead' }
    ],
    intro: {
        content: `My approach is about more than just selling wireless services; it's about architecting true, value-based partnerships. This is my playbook for delivering immediate impact while building a foundation for durable, long-term growth. It's a discipline I've used successfully throughout my career, including growing a new enterprise account from zero to $4.5M in ARR by focusing on the client's core transformation goals from day one.<br><br>This plan will detail my specific strategies for two key opportunities: driving a major <span class="t-magenta font-semibold">expansion</span> at Boston Scientific and executing a successful <span class="crl-blue font-semibold">re-acquisition</span> to win back Charles River Labs. **And to be clear, I'll be running these plays in parallel, not in series. In the real world, we have to drive progress on all fronts at once, and this plan is built to do just that.**<br><br>For both, the goal is to establish T-Mobile as an indispensable strategic <span class="t-magenta font-semibold">lifeline</span>—the core fabric for their innovation and operational excellence.`
    },
    whyMe: {
        principles: [
            { title: "I Am Customer-Obsessed", detail: "I don't sell products; I solve problems. My process begins with deep discovery of a client's strategic objectives—from their 10-K to their earnings calls—to ensure every solution I propose is directly tied to a measurable business outcome they care about." },
            { title: "I Am Outcome-Driven", detail: "Success is not measured by closed deals, but by the tangible value delivered. This plan is built around clear KPIs, pilot scorecards, and executive-level reporting to prove ROI and build the trust required for long-term, strategic expansion." },
            { title: "I Am a Strategic Partner", detail: "I build multi-threaded relationships across IT, Operations, and the C-suite. By understanding the unique priorities of each stakeholder, I transform the conversation from cost to value, positioning T-Mobile as the central nervous system for their entire enterprise." }
        ],
        statement: "This isn't just a 90-day plan to secure business. It is a repeatable framework for building a dominant, value-driven enterprise territory. I have the experience, the methodology, and the drive to execute it."
    },
    methodology: {
        phases: [
            { days: '1-30', title: 'Foundation: Intelligence & Credibility', description: 'Meticulous intelligence gathering, internal alignment, and establishing the credibility required for strategic engagement.' },
            { days: '31-60', title: 'Acceleration: Momentum & Validation', description: 'Targeted client engagement, co-creation of value, and validating hypotheses with measurable pilots.' },
            { days: '61-90', title: 'Impact: Execution & Expansion', description: 'Close early wins, publish results, and architect a multi-year roadmap (mobility + ANS + Private 5G).' }
        ],
        accountTracks: {
            bsx: [ "Discovery (Days 1–30)", "Engage & Pilot (Days 31–60)", "Win & Expand (Days 61–90)" ],
            crl: [ "Re-entry (Days 0–30)", "Execute & Differentiate (Days 31–60)", "Convert to Early Wins (Days 61–90)" ]
        }
    },
    foundationDeepDive: {
        description: "The initial 30 days set the tone. We build trust, map stakeholders, and identify low-risk, high-proof wedges to validate value quickly.",
        pillars: [
            { name: "Internal Alignment & Debrief", icon: 'Users', subSections: [
                { title: "Boston Scientific (Expansion)", items: ["Meet with the current T-Mobile account team and IoT specialists managing the relationship.", "Gather all existing engagement data: deployed IoT solutions, current mobility usage (division, line count), and history of prior proposals or challenges.", "Identify incumbent carrier footprint (who holds the other 90% of mobility?) and collect internal reports, past RFP results, and coverage maps for their Marlborough, MA HQ and other key sites."] },
                { title: "Charles River Labs (Acquisition)", items: ["Meet with the previous sales team who handled the RFP two years ago to understand precisely why we lost. Was it coverage, price, or incumbent relationship?", "Gather any post-mortem documentation or anecdotal feedback. If the issue was price, prepare a new TCO/ROI model. If it was coverage, arm myself with updated network maps and third-party data (e.g., Opensignal reports).", "Research CRL’s digital transformation and their goal to become a ‘digitally-enabled trusted partner,’ ensuring our new approach aligns with their strategic direction, not just tactical needs."] }
            ]},
            { name: "External Intelligence & Value Hypotheses", icon: 'Search', bullets: [
                "Perform a detailed analysis of the last 2-3 years of financial filings (10-K forms), investor day presentations, and corporate responsibility reports for both companies to surface executive-backed strategic imperatives.",
                "Formulate concise, powerful Value Hypotheses for each account to frame the entire engagement strategy."
            ],
            notes: [
                { label: "BSX Value Hypothesis", text: "T-Mobile's nationwide 5G fabric will connect BSX's innovation engine (IoMT, clinical trials) with its operational excellence engine (smart factories, resilient supply chain) to drive both improved patient outcomes and enhanced shareholder value." },
                { label: "CRL Value Hypothesis", text: "T-Mobile's Advanced Network Solutions will power CRL's 'Lab of the Future'—providing the speed, security, and reliability required to help shave a year off the drug development lifecycle." }
            ],
            dossierTriggers: ['intelligence-dossier-trigger']
            },
            { name: "Stakeholder Mapping & Persona Dossiers", icon: 'Map', bullets: [
                "Systematically identify and categorize all potential stakeholders into four primary groups: Decision-Makers, Influencers, Users, and Blockers.",
                "Develop detailed Target Persona Dossiers for Boston Scientific (expansion) and Charles River Labs (acquisition), moving beyond titles to understand individual motivations and pain points."
            ],
            dossierTriggers: ['bsx-dossier-trigger', 'crl-dossier-trigger']
            },
            { name: "Initial Credibility Plays & Exit Criteria", icon: 'Shield', bullets: [
                "**Exit Criteria:** The primary goal for this 30-day phase is to secure 5-7 initial meetings across both accounts, spanning both existing contacts and newly identified strategic stakeholders.",
                "For Boston Scientific, execute a 'listening tour' to expand from a single persona to a multi-threaded relationship across at least 5-7 key contacts.",
                "For Charles River Labs, reframe the conversation completely away from the lost RFP with a value-based introduction, leveraging a relevant case study like the VA's secure telehealth program."
            ]
            }
        ]
    },
    bsx: {
        subHeader: "From Connectivity Vendor to Value Fabric Partner",
        strategyIntro: "My approach for Boston Scientific is a dual-track strategy: we'll run a series of quick-win pilots to deliver immediate value and build trust, while in parallel, we'll develop the long-term, multi-threaded partnership through a three-pronged strategic engagement.",
        stock: { ticker: 'NYSE: BSX', price: '$102.14', change: '+1.12', percent: '(+1.11%)', isUp: true },
        current: ["Small IoT foothold in one division.", "10% share of mobility.", "Single-persona relationship.", "53k+ Employees / 16 Mfg. Facilities", "Financial Snapshot"],
        prongs: [
            { name: "Enhance the 'Innovative Care' Engine", icon: 'Globe2',
            opportunity: "BSX's LATITUDE™ Remote Patient Management system already lists T-Mobile as a supported cellular carrier. This existing technical integration is the perfect wedge for a strategic conversation.",
            action: "Propose and execute a 'Next-Gen IoMT Connectivity Workshop' to discuss how our 5G network can enhance their entire remote patient monitoring portfolio with improved reliability, lower latency, and global roaming support.",
            targets: ["Director of R&D (Cardiology)", "LATITUDE™ PM", "VP, Digital Health"] },
            { name: "Fortify the 'High Performance' Engine", icon: 'Factory',
            opportunity: "BSX has a stated corporate objective to improve supply chain resilience, and its 16 principal manufacturing facilities are prime candidates for Industry 4.0 solutions.",
            action: "Propose a paid pilot for IoT Asset Tracking or 5G FWA at their Marlborough, MA, headquarters. This quick win offers immediate ROI and serves as the foundational step toward deploying a full Private 5G Network.",
            targets: ["VP Global Supply Chain", "Director Manufacturing Ops", "Site Plant Manager"] },
            { name: "Empower the 'Global Collaboration' Engine", icon: 'Network',
            opportunity: "With 53,000 global employees and geographically dispersed clinical trials, mobility is mission-critical. Our current 10% share represents a significant under-penetration and an opportunity for consolidation.",
            action: "Reframe the mobility conversation from cost-per-line to business value. We will focus on security (SASE), productivity (in-flight Wi-Fi), budget predictability (5-Year Price Guarantee), and leveraging T-Mobile's partnership with Starlink to provide a revolutionary comms failover for hard-to-reach clinical trial sites or key personnel.",
            targets: ["CIO", "CISO", "VP Sales Ops", "Head of Clinical Trial Ops"] }
        ]
    },
    crl: {
        subHeader: "The T-Mobile Lifeline: Powering the Lab of the Future",
        strategyIntro: "The 'Magenta Comeback' at Charles River Labs requires a dual-track strategy: we will re-establish trust by deploying surgical, high-value 'wedge' pilots to de-risk their operations immediately. In parallel, we will elevate the conversation to the C-suite with a three-pronged strategic approach focused on their 'Lab of the Future' vision.",
        stock: { ticker: 'NYSE: CRL', price: '$153.25', change: '-0.88', percent: '(-0.57%)', isUp: false },
        current: ["Lost Mobility RFP ~2 years ago.", "Locked with incumbent.", "Major Digital Transformation.", "~20k employees globally.", "New Strategic Imperatives."],
        narrative: `The re-engagement must begin by acknowledging the past while immediately pivoting to the future. The opening narrative: "A great deal has changed in two years for both of our organizations. T-Mobile has built the nation’s largest and fastest 5G network. Charles River Labs has embarked on an ambitious digital transformation, in partnership with McKinsey, with the goal of shaving a year off the drug development process. The conversation today is not about the RFP from two years ago; it is about whether T-Mobile’s network of the future can power CRL’s <a href='https://www.criver.com/about-us' target='_blank' rel='noopener noreferrer' class='underline crl-blue hover:opacity-80'>Lab of the Future</a>."`,
        prongs: [
            { name: "Enable the Digitally-Enabled Partner Vision", icon: 'Cpu',
            opportunity: "Digital pathology, lab automation and AI require consistent low-latency throughput across complex labs.",
            action: "‘Wireless Fiber’ briefing: 5G ANS for deterministic performance; propose FWA at a flagship site/vivarium.",
            targets: ["Chief Digital Officer", "CIO", "Head of Lab Ops", "VP R&D Tech"] },
            { name: "Underpin the Data Integrity Mandate", icon: 'Lock',
            opportunity: "Strict compliance (e.g., 21 CFR Part 11) and sensitive data flows.",
            action: "Security workshop: Private 5G as an air-gapped domain + Security Slice; align on audit trails, segmentation, ZTNA.",
            targets: ["CISO", "Director IT Infra", "Head of Quality & Compliance"] },
            { name: "Connect the Global Research Enterprise", icon: 'Globe2',
            opportunity: "100+ sites in 20+ countries; agile ops need seamless, resilient connectivity.",
            action: "Re-introduce mobility as an accelerator; add satellite messaging for remote sites; lock a 12–24m carve-out covering POTS + FWA + SASE.",
            targets: ["Head of Global Ops", "CIO", "Head of Procurement"] }
        ]
    },
    accelerator: {
        description: "The 60-day phase transitions from discovery to execution, launching high-impact pilots to generate tangible proof points for executive sponsors.",
        bsx: { title: "Boston Scientific", summary: "We will launch the initial pilots for POTS Replacement, FWA failover, and SASE on Security Slice. The focus is on establishing measurable baselines for uptime, compliance, and security posture, with a scorecard ready by Day 75." },
        crl: { title: "Charles River Labs", summary: "For the re-entry, we will deploy non-disruptive wedges like a strategic IoT pilot and FWA backup. By running a data-driven comparison against the incumbent, we will build the case for a larger carve-out." }
    },
    impact: {
        description: "By Day 90, the initial pilots convert into tangible wins, establishing commercial footholds, creating multi-million dollar pipeline growth, and cementing our long-term strategic position.",
        bsx: { title: "Boston Scientific Outcomes", summary: "The goal is to close the first multi-site POTS/FWA bundles, convert the SASE pilot to 1,000+ lines, and expand our mobility share from 10% to over 25% in targeted business units. This creates a $2M+ qualified pipeline and establishes a joint strategic working group to roadmap future Private 5G collaborations." },
        crl: { title: "Charles River Labs Outcomes", summary: "Success means converting the pilot into a 12-24 month commercial carve-out for POTS, FWA, and 500-1,000 SASE lines. This successful 'Magenta Comeback' creates a qualified $500k+ opportunity for a Private Network PoC and secures a joint innovation workshop to align on a long-term strategic roadmap." }
    },
    summary: {
        rows: [
            { phase: "30 Days", account: "Boston Scientific", actions: "Discovery + listening tour; shortlist pilot plants; legal/proc path.", kpi: "Scorecard template + exec cadence set; 2–3 pilots scoped.", outcome: "Foundation for multi-threaded expansion + quick-win pilots." },
            { phase: "30 Days", account: "Charles River Labs", actions: "Win/loss autopsy; request 90-day carve-out; select flagship + vivarium sites.", kpi: "Pilot success criteria locked; first deployments scheduled.", outcome: "Strategic re-entry path agreed with low-risk wedges." },
            { phase: "60 Days", account: "Boston Scientific", actions: "POTS @2 sites; FWA @3 sites; 100-SIM SASE; private/hybrid 5G survey.", kpi: "Scorecard published; exec cadence locked.", outcome: "Pilots producing proof; ready to scale and close bundles." },
            { phase: "60 Days", account: "Charles River Labs", actions: "POTS + FWA live; SASE pilot; satellite messaging intro.", kpi: "Outcomes vs incumbent reviewed; ROI worksheet shared.", outcome: "Carve-out momentum; bundle close imminent." },
            { phase: "90 Days", account: "Boston Scientific", actions: "Close POTS/FWA bundles; convert SASE to 1,000+; mobility to ~25% in target BUs.", kpi: "QBR locked; Joint working group established.", outcome: "~$100k+ in pilots closed; $2M+ pipeline growth; private 5G path." },
            { phase: "90 Days", account: "Charles River Labs", actions: "Close 12–24m carve-out: POTS + FWA + 500–1,000 SASE lines.", kpi: "Executive scorecard published; Joint innovation workshop scheduled.", outcome: "‘Magenta Comeback’ lands; qualified $500k+ PN PoC in pipeline." }
        ]
    },
    conclusion: {
        content: `This 90-day plan is the blueprint for establishing a dominant and lasting T-Mobile presence in New England's top enterprise accounts. It is ambitious, measurable, and executable. By converting pilots into proof, and proof into partnerships, we will not only win business—we will become a core strategic asset for our clients.<br><br><strong class="text-primary">I am ready to execute this plan and deliver these results. Thank you for your time.</strong>`
    },
    dossiers: {
        bsx: {
            title: "Boston Scientific Intel Dossiers",
            personas: [
                { title: 'The IoMT Product Manager', role: 'LATITUDE™ Platform Lead', priority: 'Reliability & Future-Proofing', pain: 'Legacy cellular limits real-time features; complex global deployments.', approach: "Position 5G as enabler; use T-Mobile global IoT platform for scale." },
                { title: 'The Supply Chain Director', role: 'Global Operations', priority: 'Resilience & Efficiency', pain: 'Low visibility into high-value assets across 16 sites.', approach: "IoT Asset Tracking pilot as step-1 to Smart Factory & Private 5G." },
                { title: 'The Chief Information Officer', role: 'Enterprise IT & Digital', priority: 'Security & Collaboration', pain: 'Fragmented mobility & security.', approach: "Reframe to value with SIM-SASE, Price Lock, and global reliability." }
            ],
            table: {
                headers: ['Persona', 'Business Unit', 'Key Priority', 'T-Mobile Value Prop', 'Proposed Engagement'],
                rows: [
                    ['VP, Digital Health', 'Cardiology/R&D', 'Remote monitoring outcomes', '5G reliability for LATITUDE™', 'Next-Gen IoMT Workshop'],
                    ['VP, Global Supply Chain', 'Operations', 'Resilient & efficient plants', 'Real-time asset visibility; Private 5G', 'IoT Tracking Pilot & PN Roadmap'],
                    ['CIO / CISO', 'IT/Security', 'Secure global collaboration', 'SIM-SASE + predictable costs', 'Enterprise Mobility Value Assessment'],
                    ['Director, Manufacturing', 'Operations', 'Uptime & efficiency', 'Predictive maintenance over PN', 'Paid Pilot @ Marlborough']
                ]
            },
            mobility: {
                title: "BSX 90-Day Execution Roadmap",
                subtitle: "A phased approach to land quick wins and build a strategic partnership.",
                sections: [
                    { title: "Days 0-30: Discovery & Quick Wins", icon: 'Search', items: [
                        { name: "Map & Quantify", detail: "Conduct executive and topological mapping across IT, OT, Security, and Field Ops. Quantify T-Mobile's current share vs. competitor footprint." },
                        { name: "Identify Urgent Needs", detail: "Identify regulated POTS lines (elevators, fire, alarms) and sites with high downtime risk. Shortlist 2 sites for initial pilots." },
                        { name: "Build the Business Case", detail: "Create a data-driven case focusing on the cost of downtime, alarm compliance risks, and the need for remote worker security hardening." },
                        { name: "Launch 'Quick Win' Pilots", detail: "Propose immediate, low-risk pilots: POTS Replacement, Business Internet as failover, a 100-SIM SASE trial, and satellite messaging for remote teams." }
                    ]},
                    { title: "Days 31-60: Engage & Pilot", icon: 'Rocket', items: [
                        { name: "Execute Initial Pilots", detail: "Launch the POTS Replacement pilot at 2 sites and stand up Business Internet failover at 3 critical locations." },
                        { name: "Secure Field Users", detail: "Spin up the 100-SIM SASE pilot on Security Slice for remote field users and routers. Begin device & MDM hygiene to consolidate lines." },
                        { name: "Explore Advanced Solutions", detail: "Run a private/hybrid 5G site survey for one factory line, defining clear ROI metrics (latency, uptime, safety)." }
                    ]},
                    { title: "Days 61-90: Win & Expand", icon: 'BarChart3', items: [
                        { name: "Close Initial Deals", detail: "Close the multi-site POTS Replacement deal and bundle with FWA. Convert the SASE pilot into a 1,000+ line commitment." },
                        { name: "Expand Mobility Share", detail: "Grow our mobility share from 10% to over 25% within targeted business units based on pilot success and proven value." },
                        { name: "Lock in Strategic Partnership", detail: "Secure a quarterly business review (QBR) with executive leadership and establish a joint roadmap for the next phase (e.g., Private 5G)." }
                    ]}
                ]
            }
        },
        crl: {
            title: "Charles River Labs Intel Dossiers",
            personas: [
                { title: 'Head of Lab Automation', role: 'Lab of the Future', priority: 'Uptime & Throughput', pain: 'Wi-Fi bottlenecks for robotics/scanners.', approach: "Introduce 5G ANS + FWA trial; measure throughput gains." },
                { title: 'Director of Digital Pathology', role: 'R&D Tech', priority: 'Data Transfer Speed', pain: 'Slow movement of massive images.', approach: "Use 5G low-latency bandwidth to accelerate workflows." },
                { title: 'Chief Information Security Officer', role: 'IT Security', priority: 'Integrity & Compliance', pain: 'Shared networks risk sensitive data.', approach: "Private 5G as air-gapped domain; align to 21 CFR Part 11." }
            ],
            table: {
                headers: ['Persona', 'Pains/Priorities', 'Old Conversation', 'New Conversation', 'T-Mobile Solution'],
                rows: [
                    ['Chief Digital Officer', 'Accelerate R&D; Future lab', 'Line price & subsidies', 'Deterministic fabric for automation & AI', 'Private 5G / ANS'],
                    ['CISO', 'Data integrity & compliance', 'Generic mobile security', 'Air-gapped posture for sensitive data', 'Private 5G + Security Slice'],
                    ['Head of Lab Ops', 'Continuity & scaling', 'Coverage complaints', 'Remove bottlenecks (alarms/robots/scanners)', 'FWA backup + Private 5G'],
                    ['Procurement', 'Cost & risk', 'Rate cards', 'Transparent pilot scorecards; fast payback', 'Land-and-expand pilots']
                ]
            },
            redemption: {
                title: "CRL Redemption Arc: 90-Day Roadmap",
                subtitle: "Rebuild trust by demonstrating immediate value and a superior partnership model.",
                trustSections: [
                    { 
                        title: "Trust-Building Gestures",
                        icon: 'Shield',
                        items: [
                            { name: "Complimentary Network Audit", detail: "Offer to have our engineers conduct a free, no-obligation on-site coverage check or solution audit of their current setup. This provides immediate value and helps us identify pain points the incumbent may be missing." },
                            { name: "Hyper-Responsiveness", detail: "Signal the superior level of service they will receive by turning around any request for information with exceptional speed and thoroughness. A quickly-delivered transition plan, for example, demonstrates proactive expertise." },
                            { name: "Cultivate Internal Champions", detail: "As conversations progress, identify and nurture allies within CRL. A networking manager excited by our 5G tech or a finance lead intrigued by potential savings can become a powerful internal advocate."}
                        ]
                    },
                    {
                        title: "The 'Why T-Mobile, Why Now' Value Prop",
                        icon: 'Zap',
                        items: [
                            { name: "Network Superiority", detail: "Present hard data and third-party reports (e.g., Ookla) to showcase our dramatic 5G network improvements in their key locations since the last RFP. This isn't the same network they reviewed two years ago." },
                            { name: "Innovation Partnership", detail: "Differentiate T-Mobile by focusing on their 'Lab of the Future' vision. Pitch how Private 5G can enable AR/VR for remote pathology or real-time AI analytics—positioning us as a tech partner, not a commodity vendor." }
                        ]
                    }
                ],
                sections: [
                    { title: "Days 0-30: Re-entry & De-risking (The 'Wedge')", icon: 'Shield', items: [
                        { name: "Conduct Win/Loss Autopsy & Secure Carve-Out", detail: "Meet with buyers and influencers from the previous RFP to understand the loss. Ask for a 90-day 'carve-out' to prove value on our terms, focusing on non-disruptive solutions." },
                        { name: "Deploy Low-Risk Wedges", detail: "Target one flagship site and one vivarium for two surgical pilots: POTS Replacement for regulated lines and Business Internet for failover. These de-risk their operations on Day 1." },
                        { name: "Launch 'Prove It' Security Pilot", detail: "Offer a complimentary 100-line SASE pilot for lab/field teams to directly compare against the incumbent. Propose a SuperMobile pilot for critical executive staff." }
                    ]},
                    { title: "Days 31-60: Execute & Differentiate", icon: 'Rocket', items: [
                        { name: "Rapid Deployment & Measurement", detail: "Deploy POTS Replacement and FWA within 2-4 weeks. Measure and report on uptime improvements and code compliance via a shared scorecard." },
                        { name: "Run Data-Driven Comparison", detail: "Conduct a formal SASE pilot outcomes review vs. the incumbent, focusing on measurable KPIs: latency, reliability, and help-desk ticket reduction." },
                        { name: "Introduce a Unique Differentiator", detail: "Introduce T-Satellite (Direct-to-Cell) messaging for field techs who service remote sites, solving a problem the incumbent cannot." }
                    ]},
                    { title: "Days 61-90: Convert to Early Wins", icon: 'BarChart3', items: [
                        { name: "Close the Carve-Out", detail: "Secure a 12–24 month carve-out agreement for the initial solutions: POTS + FWA + 500–1,000 SASE-protected lines." },
                        { name: "Publish & Socialize Success", detail: "Create and publish an executive scorecard detailing the success of the pilots. Use this proof point to build trust and momentum for the larger strategic discussion." },
                        { name: "Request the Next Step", detail: "Leverage the successful carve-out to request a formal 'Lab of the Future' innovation workshop and an MSA addendum to re-compete for the broader mobility contract." }
                    ]}
                ]
            },
            intelligence: {
                title: "Key Intelligence Dossier",
                subtitle: "Public docs informing the strategy.",
                links: [
                    {
                        company: "Boston Scientific",
                        logo: "https://logo.clearbit.com/bostonscientific.com",
                        items: [
                            { label: "2024 Annual Report (10-K)", url: "https://investors.bostonscientific.com/~/media/Files/B/Boston-Scientific-IR-V3/annual-reports-proxy-statements/2025/bsc-2024-annual-report-and-10-k.pdf" },
                            { label: "Latest Investor Presentation", url: "https://investors.bostonscientific.com/events-and-presentations" },
                            { label: "2024 Performance Report", url: "https://www.bostonscientific.com/content/dam/bostonscientific/corporate/corporate-responsibility/performance-report/BostonScientific2024PerformanceReport.pdf" }
                        ]
                    },
                    {
                        company: "Charles River Labs",
                        logo: "https://logo.clearbit.com/criver.com",
                        items: [
                            { label: "2024 Annual Report (10-K)", url: "https://ir.criver.com/static-files/5f7220a8-d473-4596-bcf8-b827367f97de" },
                            { label: "Investor Presentation", url: "https://s202.q4cdn.com/341148777/files/doc_presentations/09/CRL-2023-Meeting-with-Management_PrintVersion2.pdf" },
                            { label: "Corporate Citizenship Report", url: "https://ir.criver.com/static-files/07546622-c43c-4554-98b4-6fcf4dafeaf5" }
                        ]
                    }
                ]
            }
        }
    },
    momentum: {
        operatingRhythm: {
            daily: ["Prospecting & Discovery Blocks", "Pilot & POC Execution", "Internal Sync with SE/ANS Specialists"],
            weekly: ["Executive Deal Reviews", "Pipeline Scrub & Forecasting", "Client Value Scorecard Updates"],
            monthly: ["Client QBRs (Quarterly Business Reviews)", "Pilot-to-Production Conversion Strategy", "Joint Marketing & Success Story Alignment"]
        },
        proofGovernance: [
            "Every pilot begins with a jointly-agreed scorecard, defining success criteria and baseline KPIs upfront.",
            "I provide weekly executive updates on pilot progress, managing expectations and removing roadblocks.",
            "Successful pilots are converted into case studies and socialized within the client's organization to build internal momentum."
        ],
        differentiation: [
            "**Network Supremacy:** We lead on 5G speed, coverage, and innovation like commercial slicing.",
            "**Security by Design:** Our SIM-based, network-integrated SASE is a fundamentally superior security architecture.",
            "**Unmatched Reach:** Our integrated satellite solution means we connect businesses where no one else can.",
            "**Partnership Model:** We prove our value first with low-risk, high-impact pilots before asking for the enterprise-wide contract."
        ],
        philosophy: "Execute with precision, prove value obsessively, and expand relentlessly."
    }
};

// --- STATE MANAGEMENT ---
const state = {
    dark: true,
    activeSection: STRATEGY_DATA.sections[0].id,
    isPresenterMode: false,
    currentStep: 0
};

// --- DOM REFERENCES ---
const appContainer = document.getElementById('app-container');
const mainContent = document.getElementById('main-content');
const sidebarNav = document.getElementById('sidebar-nav');
const darkToggle = document.getElementById('dark-toggle');
const modalContainer = document.getElementById('modal-container');
const presenterToggle = document.getElementById('presenter-toggle');
const presenterControls = document.getElementById('presenter-controls');


// --- HELPER FUNCTIONS ---
const getIcon = (name) => {
    const icon = document.getElementById(`icon-${name}`);
    return icon ? icon.cloneNode(true) : null;
};

// --- TEMPLATING & RENDERING ---
const createSectionHTML = (section) => {
    let contentHTML = '';
    let subtitleHTML = '';
    
    if (section.id === 'intro') {
        subtitleHTML = `<p class="mt-2 text-secondary text-center mx-auto max-w-4xl">${STRATEGY_DATA.subtitle}</p>`;
        contentHTML = `<div class="section-content"><p class="text-xl leading-relaxed max-w-4xl text-center mx-auto">${STRATEGY_DATA.intro.content}</p></div>`;
    } else {
         switch(section.id) {
            case 'why-me': {
                const w = STRATEGY_DATA.whyMe;
                contentHTML = `
                <div class="section-content max-w-5xl mx-auto">
                    <div class="grid md:grid-cols-3 gap-6 text-center">
                        ${w.principles.map(p => `
                        <div class="card border rounded-lg p-6 group hover:-translate-y-1 hover:shadow-2xl">
                            <h4 class="font-bold text-xl text-primary">${p.title}</h4>
                            <p class="mt-2 text-base">${p.detail}</p>
                        </div>`).join('')}
                    </div>
                    <p class="mt-8 text-xl text-primary font-semibold text-center italic">"${w.statement}"</p>
                </div>`;
                break;
            }
            case 'momentum': {
                const m = STRATEGY_DATA.momentum;
                const block = (title, items) => `
                    <div class="card border rounded-lg p-6">
                        <h4 class="font-bold text-lg text-primary">${title}</h4>
                        <ul class="mt-3 space-y-1 text-sm">${items.map(x=>`<li class="ml-6 list-disc">${x}</li>`).join('')}</ul>
                    </div>`;
                contentHTML = `
                <div class="section-content">
                    <p class="text-xl font-semibold text-primary mb-6 text-center mx-auto">My Philosophy: <span class="italic">"${m.philosophy}"</span></p>
                    <div class="grid md:grid-cols-3 gap-6">
                        ${block('Daily Rhythm', m.operatingRhythm.daily)}
                        ${block('Weekly Cadence', m.operatingRhythm.weekly)}
                        ${block('Monthly Impact', m.operatingRhythm.monthly)}
                    </div>
                    <div class="grid md:grid-cols-2 gap-6 mt-6">
                        ${block('Proof & Governance', m.proofGovernance)}
                        ${block('Our Unfair Advantage', m.differentiation)}
                    </div>
                </div>`;
                break;
            }
            case 'methodology':
                contentHTML = `<div class="section-content">
                    <div class="grid md:grid-cols-3 gap-6">${STRATEGY_DATA.methodology.phases.map(p => `
                        <div class="card border rounded-lg p-6 group hover:-translate-y-1 hover:shadow-2xl">
                            <h3 class="font-bold text-xl text-primary flex items-center gap-2">${getIcon('Timer').outerHTML} ${p.days}</h3>
                            <h4 class="font-semibold text-lg text-primary mt-2">${p.title}</h4>
                            <p class="mt-2 text-base">${p.description}</p>
                        </div>`).join('')}</div>
                    <div class="grid md:grid-cols-2 gap-6 mt-6">
                        <div class="card border rounded-lg p-6">
                            <h4 class="font-bold text-xl text-primary">Boston Scientific Track</h4>
                            <ul class="mt-3 text-sm space-y-2">${STRATEGY_DATA.methodology.accountTracks.bsx.map(x => `<li class="ml-6 list-disc">${x}</li>`).join('')}</ul>
                        </div>
                        <div class="card border rounded-lg p-6">
                            <h4 class="font-bold text-xl text-primary">Charles River Labs Track</h4>
                            <ul class="mt-3 text-sm space-y-2">${STRATEGY_DATA.methodology.accountTracks.crl.map(x => `<li class="ml-6 list-disc">${x}</li>`).join('')}</ul>
                        </div>
                    </div>
                </div>`;
                break;
            case 'foundation-deep-dive':
                contentHTML = `<div class="section-content"><p class="max-w-4xl text-lg mb-8">${STRATEGY_DATA.foundationDeepDive.description}</p>
                <div class="max-w-4xl space-y-4">${STRATEGY_DATA.foundationDeepDive.pillars.map(p => {
                    const dossierTriggersHTML = p.dossierTriggers ? `<div class="mt-4 flex flex-col sm:flex-row gap-3">${p.dossierTriggers.map(id => {
                        if(id.includes('intelligence')) {
                            return `<button data-modal-trigger="intelligence-dossier" class="w-full text-center py-2 px-4 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-500 transition">View Key Intelligence Links</button>`;
                        }
                        const isBsx = id.includes('bsx');
                        return `<button data-modal-trigger="dossier" data-dossier-type="${isBsx ? 'bsx' : 'crl'}" class="w-full text-center py-2 px-4 ${isBsx ? 't-magenta-bg' : 'crl-blue-bg'} text-white font-semibold rounded-lg hover:opacity-90 transition">View ${isBsx ? 'BSX' : 'CRL'} Intel Dossiers</button>`
                    }).join('')}</div>` : '';
                    
                    let subSectionHTML = p.subSections ? `<div class="space-y-4 pt-4">${p.subSections.map(sub => `
                            <div class="pl-4">
                                 <h5 class="font-semibold text-primary">${sub.title}</h5>
                                 <ul class="list-disc ml-6 mt-2 space-y-1 text-base">${sub.items.map(i => `<li>${i}</li>`).join('')}</ul>
                            </div>`).join('<hr class="border-color my-4">')}</div>` : `<ul class="list-disc ml-6 space-y-2 text-base">${p.bullets.map(b => `<li>${b}</li>`).join('')}</ul>`;

                    return `<div class="accordion-item card border rounded-lg p-4">
                        <button class="accordion-trigger w-full flex justify-between items-center text-left" aria-expanded="false">
                            <span class="font-bold text-lg text-primary flex items-center gap-3">${getIcon(p.icon).outerHTML} ${p.name}</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-secondary" aria-hidden="true"><polyline points="6 9 12 15 18 9"></polyline></svg>
                        </button>
                        <div class="accordion-content max-h-0">
                            <div class="pt-4 border-t border-color mt-4">
                                ${subSectionHTML}
                                ${p.notes ? `<div class="mt-4 grid md:grid-cols-2 gap-4">${p.notes.map(n => `<div class="bg-[var(--bg)] p-4 rounded-lg border border-color border-dashed"><h4 class="font-semibold text-primary">${n.label}</h4><p class="text-sm mt-1">${n.text}</p></div>`).join('')}</div>` : ''}
                                ${dossierTriggersHTML}
                            </div>
                        </div>
                    </div>`}).join('')}</div></div>`;
                break;
            case 'bsx':
            case 'crl':
                const data = section.id === 'bsx' ? STRATEGY_DATA.bsx : STRATEGY_DATA.crl;
                const isBsx = section.id === 'bsx';
                const narrativeHTML = data.narrative ? `<div class="card border rounded-lg p-6 mb-8 text-lg">${data.narrative}</div>` : '';
                const strategyIntroHTML = data.strategyIntro ? `<p class="text-lg my-8">${data.strategyIntro}</p>`: '';
                const stockCardHTML = `
                    <div class="card border rounded-lg p-4 text-center flex flex-col justify-center group hover:-translate-y-1 hover:shadow-xl">
                        <p class="text-sm font-semibold text-secondary flex items-center justify-center gap-2"><img src="https://logo.clearbit.com/${isBsx ? 'bostonscientific.com':'criver.com'}" alt="${data.stock.ticker} logo" class="h-5 w-5 bg-white p-0.5 rounded-full" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNNiAyMlY0YTItMiAwIDAgMSAyLTJoOGEyLTIgMCAwIDEgMiAydjE4WiIvPjxwYXRoIGQ9Ik02IDEySDRhMiAyIDAgMCAwLTIgMnY2YTIgMiAwIDAgMCAyIDJoMiIvPjxwYXRoIGQ9Ik0xOCA5aDJhMiAyIDAgMCAxIDIgMnY5YTIgMiAwIDAgMS0yIDJoLTIiLz48cGF0aCBkPSJNMTAgNmggNCIvPjxwYXRoIGQ9Ik0xMCAxMGg0Ii8+PHBhdGggZD0iTTEwIDE0aDQiLz48cGF0aCBkPSJNMTAgMThoNCIvPjwvc3ZnPg=='"/>${data.stock.ticker}</p>
                        <p class="text-2xl font-bold text-primary">${data.stock.price}</p>
                        <p class="text-sm font-semibold flex items-center justify-center ${data.stock.isUp ? 'text-[var(--stock-green)]' : 'text-[var(--stock-red)]'}">
                            <svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">${data.stock.isUp ? '<path d="M7 14l5-5 5 5z"/>' : '<path d="M7 10l5 5 5-5z"/>'}</svg>
                            ${data.stock.change} ${data.stock.percent}
                        </p>
                    </div>`;
                let currentCardsData = [...data.current];
                let combinedCard = isBsx ? `<div class="card border rounded-lg p-4 text-center flex flex-col justify-center group hover:-translate-y-1 hover:shadow-xl"><p class="text-lg font-bold t-magenta">${currentCardsData.pop()}</p><p class="text-sm">~$16.7B Sales / ~$1.6B R&D</p></div>` : '';
                const currentCards = currentCardsData.map(c => `<div class="card border rounded-lg p-4 text-center flex flex-col justify-center group hover:-translate-y-1 hover:shadow-xl"><p class="text-lg font-bold ${isBsx ? 't-magenta' : 'crl-blue'}">${c.split(' ')[0]}</p><p class="text-sm">${c.substring(c.indexOf(" ") + 1)}</p></div>`).join('');
                const currentHTML = `<div class="mb-8"><h3 class="text-2xl font-bold text-primary mb-4">Current State Analysis</h3><div class="grid grid-cols-2 md:grid-cols-3 gap-4">${currentCards}${combinedCard}${stockCardHTML}</div></div>`;
                const prongsHTML = data.prongs.map(p => `
                    <div class="card border rounded-lg overflow-hidden group hover:shadow-2xl hover:-translate-y-1">
                        <div class="p-6">
                            <h4 class="font-bold text-xl text-primary flex items-center gap-3">${getIcon(p.icon).outerHTML} ${p.name}</h4>
                            <p class="mt-3 text-base"><strong class="text-secondary">Opportunity:</strong> ${p.opportunity}</p>
                            <p class="mt-2 text-base"><strong class="text-secondary">Action Plan:</strong> ${p.action}</p>
                        </div>
                        <div class="px-6 py-3 bg-[var(--bg)] border-t border-color text-sm"><strong class="text-secondary">Target Personas:</strong> ${p.targets.join(', ')}</div>
                    </div>`).join('');
                
                const roadmapButton = `<div class="mt-6"><button data-modal-trigger="${isBsx ? 'mobility' : 'redemption'}-roadmap" data-dossier-type="${section.id}" class="w-full text-center py-3 px-4 ${isBsx ? 't-magenta-bg' : 'crl-blue-bg'} text-white font-bold rounded-lg hover:opacity-90 transition text-lg flex items-center justify-center gap-2">${getIcon(isBsx ? 'Rocket' : 'Shield').outerHTML} View ${isBsx ? '90-Day Execution Roadmap' : 'Redemption Arc Roadmap'}</button></div>`;

                contentHTML = `<div class="section-content">${currentHTML}${narrativeHTML}${strategyIntroHTML}<h3 class="text-2xl font-bold text-primary mb-4">Three-Pronged Strategy</h3><div class="space-y-6">${prongsHTML}</div>
                <div class="mt-8"><button data-modal-trigger="persona-matrix" data-dossier-type="${section.id}" class="w-full text-center py-3 px-4 ${isBsx ? 't-magenta-bg' : 'crl-blue-bg'} text-white font-bold rounded-lg hover:opacity-90 transition text-lg">View Strategic Persona Matrix</button></div>
                ${roadmapButton}</div>`;
                break;
            case 'accelerator':
            case 'impact':
                const pageData = STRATEGY_DATA[section.id];
                const card = (account) => `
                    <div>
                         <h3 class="text-2xl font-bold text-primary mb-4 flex items-center gap-3"><img src="https://logo.clearbit.com/${account === 'bsx' ? 'bostonscientific.com' : 'criver.com'}" alt="${pageData[account].title} Logo" class="h-8 w-8 bg-white p-1 rounded-full" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNNiAyMlY0YTItMiAwIDAgMSAyLTJoOGEyLTIgMCAwIDEgMiAydjE4WiIvPjxwYXRoIGQ9Ik02IDEySDRhMiAyIDAgMCAwLTIgMnY2YTIgMiAwIDAgMCAyIDJoMiIvPjxwYXRoIGQ9Ik0xOCA5aDJhMiAyIDAgMCAxIDIgMnY5YTIgMiAwIDAgMS0yIDJoLTIiLz48cGF0aCBkPSJNMTAgNmggNCIvPjxwYXRoIGQ9Ik0xMCAxMGg0Ii8+PHBhdGggZD0iTTEwIDE0aDQiLz48cGF0aCBkPSJNMTAgMThoNCIvPjwvc3ZnPg=='"/> ${pageData[account].title}</h3>
                         <div class="card border rounded-lg p-6 group hover:-translate-y-1 hover:shadow-2xl">
                             <p class="mt-1">${pageData[account].summary}</p>
                         </div>
                     </div>`;
                contentHTML = `<div class="section-content"><p class="max-w-4xl text-lg mb-8">${pageData.description}</p><div class="grid lg:grid-cols-2 gap-8">${card('bsx')}${card('crl')}</div></div>`;
                break;
            case 'summary':
                contentHTML = `<div class="section-content"><div class="card border rounded-lg p-1 overflow-x-auto"><table class="w-full text-left">
                    <thead><tr class="border-b border-color text-sm text-secondary">${['Phase', 'Account', 'Key Actions', 'KPI', 'Desired Outcome'].map(h => `<th class="p-4 font-semibold">${h}</th>`).join('')}</tr></thead>
                    <tbody>${STRATEGY_DATA.summary.rows.map(r => `<tr class="border-b border-color last:border-0 hover:bg-[var(--bg)] transition-colors">
                        <td class="p-4 font-bold text-primary">${r.phase}</td>
                        <td class="p-4 ${r.account === 'Boston Scientific' ? 't-magenta' : 'crl-blue'} font-semibold">${r.account}</td>
                        <td class="p-4">${r.actions}</td>
                        <td class="p-4">${r.kpi}</td>
                        <td class="p-4 font-semibold text-primary">${r.outcome}</td>
                    </tr>`).join('')}</tbody>
                </table></div></div>`;
                break;
            case 'conclusion':
                contentHTML = `<div class="section-content"><p class="text-xl leading-relaxed max-w-4xl text-center mx-auto">${STRATEGY_DATA.conclusion.content}</p></div>`;
                break;
        }
    }

    const titleHTML = section.id === 'intro' ? STRATEGY_DATA.title : section.title;
    const sectionIconHTML = section.icon ? `<span class="w-12 h-12 flex items-center justify-center rounded-lg card border">${getIcon(section.icon).outerHTML}</span>` : '';

    return `<section id="${section.id}" class="py-12 fade-in-up">
        <div class="section-header flex items-center gap-4">
            ${sectionIconHTML}
            <div>
                 <h2 class="text-3xl lg:text-4xl font-black text-primary tracking-tighter">${titleHTML}</h2>
                 ${subtitleHTML}
                 ${section.id === 'bsx' ? `<p class="t-magenta font-semibold text-lg">${STRATEGY_DATA.bsx.subHeader}</p>` : ''}
                 ${section.id === 'crl' ? `<p class="crl-blue font-semibold text-lg">${STRATEGY_DATA.crl.subHeader}</p>` : ''}
            </div>
        </div><div class="mt-8">${contentHTML}</div></section>`;
};

const createModal = (content) => {
    const modalHTML = `<div class="modal fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50 opacity-0 transition-opacity duration-300" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content w-full ${content.widthClass || 'max-w-6xl'} max-h-[90vh] card border ${content.borderColorClass || ''} border-2 rounded-2xl shadow-2xl p-8 transform scale-95 opacity-0 flex flex-col">
            <div class="flex justify-between items-start mb-6">
                <div>
                     <h3 id="modal-title" class="text-2xl font-bold text-primary">${content.title}</h3>
                     <p class="font-semibold ${content.colorClass}">${content.subtitle}</p>
                </div>
                <button class="close-modal-btn text-secondary hover:text-primary transition-colors" aria-label="Close modal">${getIcon('Close').outerHTML}</button>
            </div>
            <div class="flex-1 overflow-y-auto pr-2">${content.bodyHTML}</div>
        </div></div>`;
    modalContainer.innerHTML = modalHTML;
    
    const modal = modalContainer.querySelector('.modal');
    const modalContent = modal.querySelector('.modal-content');
    
    setTimeout(() => {
        modal.classList.remove('opacity-0');
        modalContent.classList.remove('scale-95', 'opacity-0');
    }, 10);

    const closeModal = () => {
        modalContent.classList.add('scale-95', 'opacity-0');
        modal.classList.add('opacity-0');
        setTimeout(() => modal.remove(), 300);
    };

    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });
    modal.querySelector('.close-modal-btn').addEventListener('click', closeModal);
};

const createDossierModal = (dossierType) => {
    const data = STRATEGY_DATA.dossiers[dossierType];
    const isBsx = dossierType === 'bsx';
    const bodyHTML = `<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">${data.personas.map(d => `
        <div class="card border rounded-lg p-6">
            <h4 class="font-bold text-lg text-primary">${d.title}</h4>
            <p class="text-sm font-semibold ${isBsx ? 't-magenta' : 'crl-blue'}">${d.role}</p>
            <div class="mt-4 space-y-3 text-sm">
                <p><strong class="text-secondary">Core Priority:</strong> ${d.priority}</p>
                <p><strong class="text-secondary">Key Pain Point:</strong> ${d.pain}</p>
                <p><strong class="text-secondary">Strategic Approach:</strong> ${d.approach}</p>
            </div>
        </div>`).join('')}</div>`;
    
    createModal({
        title: data.title,
        subtitle: "Key Personas & Engagement Strategy",
        colorClass: isBsx ? 't-magenta' : 'crl-blue',
        borderColorClass: isBsx ? 't-magenta-border' : 'crl-blue-border',
        bodyHTML
    });
};

const createPersonaMatrixModal = (dossierType) => {
    const data = STRATEGY_DATA.dossiers[dossierType].table;
    const isBsx = dossierType === 'bsx';
    const bodyHTML = `<div class="card border rounded-lg p-1 overflow-x-auto"><table class="w-full text-left text-sm">
        <thead><tr class="border-b border-color text-secondary">${data.headers.map(h => `<th class="p-3 font-semibold">${h}</th>`).join('')}</tr></thead>
        <tbody>${data.rows.map(r => `<tr class="border-b border-color last:border-0 hover:bg-[var(--bg)] transition-colors">${r.map((c, i) => `<td class="p-3 ${i===0 ? 'font-semibold text-primary' : ''}">${c}</td>`).join('')}</tr>`).join('')}</tbody>
    </table></div>`;
    createModal({
        title: `Strategic Persona Matrix: ${isBsx ? 'Boston Scientific' : 'Charles River Labs'}`,
        subtitle: "Targeted Engagement Blueprint",
        colorClass: isBsx ? 't-magenta' : 'crl-blue',
        borderColorClass: isBsx ? 't-magenta-border' : 'crl-blue-border',
        widthClass: 'max-w-7xl',
        bodyHTML
    });
};

const createRoadmapModal = (dossierType) => {
    const isBsx = dossierType === 'bsx';
    const data = isBsx ? STRATEGY_DATA.dossiers.bsx.mobility : STRATEGY_DATA.dossiers.crl.redemption;
    let bodyHTML = '';

    if (!isBsx && data.trustSections) {
        const trustHTML = data.trustSections.map(section => `
            <div class="mb-8 last:mb-0">
                <h4 class="font-bold text-xl text-primary flex items-center gap-3">${getIcon(section.icon).outerHTML} ${section.title}</h4>
                <div class="mt-4 space-y-4">${section.items.map(item => `
                    <div class="card border rounded-lg p-4">
                        <h5 class="font-semibold text-primary">${item.name}</h5>
                        <p class="text-sm mt-1">${item.detail}</p>
                    </div>`).join('')}</div>
            </div>`).join('');
        bodyHTML += trustHTML;
        bodyHTML += '<hr class="border-color my-8">';
    }
    
    const sectionsHTML = data.sections.map(section => `
        <div class="mb-6 last:mb-0">
            <h4 class="font-bold text-xl text-primary flex items-center gap-3">${getIcon(section.icon).outerHTML} ${section.title}</h4>
            <div class="mt-4 space-y-4">${section.items.map(item => `
                <div class="card border rounded-lg p-4">
                    <h5 class="font-semibold text-primary">${item.name}</h5>
                    <p class="text-sm mt-1">${item.detail}</p>
                </div>`).join('')}</div>
        </div>`).join('<hr class="border-color my-6">');
    
    bodyHTML += sectionsHTML;

     createModal({
        title: data.title,
        subtitle: data.subtitle,
        colorClass: isBsx ? 't-magenta' : 'crl-blue',
        borderColorClass: isBsx ? 't-magenta-border' : 'crl-blue-border',
        widthClass: 'max-w-4xl',
        bodyHTML
    });
};

const createIntelligenceModal = () => {
    const data = STRATEGY_DATA.dossiers.crl.intelligence;
    const bodyHTML = `<div class="grid md:grid-cols-2 gap-8">${data.links.map(company => `
        <div>
            <h4 class="text-xl font-bold text-primary flex items-center gap-3"><img src="${company.logo}" alt="${company.company} logo" class="h-6 w-6 bg-white p-0.5 rounded-full" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNNiAyMlY0YTItMiAwIDAgMSAyLTJoOGEyLTIgMCAwIDEgMiAydjE4WiIvPjxwYXRoIGQ9Ik02IDEySDRhMiAyIDAgMCAwLTIgMnY2YTIgMiAwIDAgMCAyIDJoMiIvPjxwYXRoIGQ9Ik0xOCA5aDJhMiAyIDAgMCAxIDIgMnY5YTIgMiAwIDAgMS0yIDJoLTIiLz48cGF0aCBkPSJNMTAgNmggNCIvPjxwYXRoIGQ9Ik0xMCAxMGg0Ii8+PHBhdGggZD0iTTEwIDE0aDQiLz48cGF0aCBkPSJNMTAgMThoNCIvPjwvc3ZnPg=='"/> ${company.company}</h4>
            <div class="mt-4 space-y-3">${company.items.map(item => `
                <a href="${item.url}" target="_blank" rel="noopener noreferrer" class="card border rounded-lg p-4 flex justify-between items-center hover:border-[var(--tmobile-magenta)] transition-colors">
                    <span class="font-semibold text-primary">${item.label}</span>
                    <svg class="w-5 h-5 text-secondary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                </a>`).join('')}</div>
        </div>`).join('')}</div>`;
    createModal({
        title: data.title,
        subtitle: data.subtitle,
        colorClass: 'text-secondary',
        borderColorClass: 'border-gray-500',
        widthClass: 'max-w-4xl',
        bodyHTML
    });
};


const render = () => {
    mainContent.innerHTML = STRATEGY_DATA.sections.map(createSectionHTML).join('');
    sidebarNav.innerHTML = STRATEGY_DATA.sections.map(s => {
        const iconHTML = s.icon 
            ? getIcon(s.icon).outerHTML 
            : `<img src="https://logo.clearbit.com/${s.id === 'bsx' ? 'bostonscientific.com' : 'criver.com'}" alt="${s.id} logo" class="h-5 w-5 bg-white p-0.5 rounded-sm" onerror="this.style.display='none'">`;
        return `<li><a href="#${s.id}" class="nav-link flex items-center gap-3 p-2 rounded-md transition-colors hover:bg-[var(--border)]" data-section="${s.id}">
            ${iconHTML}
            <span class="font-semibold text-primary">${s.navLabel}</span></a></li>`;
    }).join('');

    darkToggle.prepend(getIcon('Moon'));
    darkToggle.prepend(getIcon('Sun'));
    presenterToggle.prepend(getIcon('Pause'));
    presenterToggle.prepend(getIcon('Play'));
    presenterToggle.append('Presenter Mode');
    updateThemeUI();
};

const updateThemeUI = () => {
    const isDark = document.documentElement.classList.contains('dark');
    darkToggle.querySelector('#icon-Sun').style.display = isDark ? 'none' : 'block';
    darkToggle.querySelector('#icon-Moon').style.display = isDark ? 'block' : 'none';
};

const updatePresenterUI = () => {
    document.documentElement.classList.toggle('presenter-mode', state.isPresenterMode);
    presenterToggle.querySelector('#icon-Play').style.display = state.isPresenterMode ? 'none' : 'inline-block';
    presenterToggle.querySelector('#icon-Pause').style.display = state.isPresenterMode ? 'inline-block' : 'none';
    presenterControls.classList.toggle('opacity-0', !state.isPresenterMode);
    presenterControls.classList.toggle('pointer-events-none', !state.isPresenterMode);
};

const handleScroll = () => {
    let currentSectionIndex = 0;
    const sections = STRATEGY_DATA.sections;
    for (let i = 0; i < sections.length; i++) {
        const el = document.getElementById(sections[i].id);
        if (el && window.scrollY >= el.offsetTop - window.innerHeight / 3) {
            currentSectionIndex = i;
        }
    }

    if (state.currentStep !== currentSectionIndex) {
        state.activeSection = sections[currentSectionIndex].id;
        state.currentStep = currentSectionIndex;
        sidebarNav.querySelectorAll('.nav-link').forEach(link => {
            const isActive = link.dataset.section === state.activeSection;
            link.classList.toggle('t-magenta-bg', isActive);
        });
    }
};

const navigatePresenter = (direction) => {
    const newStep = state.currentStep + direction;
    if (newStep >= 0 && newStep < STRATEGY_DATA.sections.length) {
        state.currentStep = newStep;
        state.activeSection = STRATEGY_DATA.sections[newStep].id;
        const targetElement = document.getElementById(state.activeSection);
        if (targetElement) {
            targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    }
};

const init = () => {
    render();
    
    document.body.addEventListener('click', e => {
        const trigger = e.target.closest('button[data-modal-trigger]');
        if (trigger) {
            const modalType = trigger.dataset.modalTrigger;
            const dossierType = trigger.dataset.dossierType;
            if (modalType === 'dossier') createDossierModal(dossierType);
            else if (modalType === 'persona-matrix') createPersonaMatrixModal(dossierType);
            else if (modalType.includes('roadmap')) createRoadmapModal(dossierType);
            else if (modalType === 'intelligence-dossier') createIntelligenceModal();
            return;
        }

        const accordionTrigger = e.target.closest('.accordion-trigger');
        if (accordionTrigger) {
            const content = accordionTrigger.nextElementSibling;
            const isExpanded = accordionTrigger.getAttribute('aria-expanded') === 'true';
            accordionTrigger.setAttribute('aria-expanded', !isExpanded);
            content.style.maxHeight = !isExpanded ? `${content.scrollHeight}px` : null;
        } 
        
        const button = e.target.closest('button');
        if (!button) return;
        switch (button.id) {
            case 'dark-toggle':
                document.documentElement.classList.toggle('dark');
                updateThemeUI();
                break;
            case 'presenter-toggle':
                state.isPresenterMode = !state.isPresenterMode;
                if(state.isPresenterMode) handleScroll();
                updatePresenterUI();
                break;
            case 'presenter-prev-btn': navigatePresenter(-1); break;
            case 'presenter-next-btn': navigatePresenter(1); break;
        }
    });
    
    window.addEventListener('scroll', handleScroll, { passive: true });
    window.addEventListener('keydown', e => { 
        if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
        if (e.key.toLowerCase() === 'd' && !e.metaKey && !e.ctrlKey) { e.preventDefault(); darkToggle.click(); }
        if (e.key.toLowerCase() === 'p' && !e.metaKey && !e.ctrlKey) { e.preventDefault(); presenterToggle.click(); }
        if(state.isPresenterMode) {
            if(e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); navigatePresenter(1); }
            if(e.key === 'ArrowLeft') { e.preventDefault(); navigatePresenter(-1); }
        }
    });

    handleScroll();
    
    // --- Initial Load Animation ---
    const loaderBar = document.getElementById('loader-bar');
    loaderBar.style.transition = 'transform 1s cubic-bezier(0.23, 1, 0.32, 1)';
    setTimeout(() => { loaderBar.style.transform = 'scaleX(1)'; }, 100);
    setTimeout(() => {
        document.getElementById('loader').style.opacity = '0';
        appContainer.style.opacity = '1';
        
        // Setup Intersection Observer for fade-in animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target); // Animate only once
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));
        
        setTimeout(() => document.getElementById('loader').style.display = 'none', 500);
    }, 1200);

    // Cursor gradient effect
    const cursorGradient = document.querySelector('.cursor-gradient');
    window.addEventListener('mousemove', e => {
        cursorGradient.style.setProperty('--mouse-x', `${e.clientX}px`);
        cursorGradient.style.setProperty('--mouse-y', `${e.clientY}px`);
    });
};

init();
});
</script>
</body>
</html>

